<!DOCTYPE html>
<html lang="en">
<head>
    {% load static %}

    <script src="https://unpkg.com/htmx.org@1.9.11"></script>
    <script
        src="https://code.jquery.com/jquery-3.2.1.min.js"
        integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
        crossorigin="anonymous">
    </script>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            document.body.addEventListener('htmx:afterSwap', function(event) {
                const formsDiv = event.target;

                if (!formsDiv.id || !formsDiv.id.endsWith('-forms')) return;

                const prefix = formsDiv.id.replace('-forms', '');
                const formsetDiv = formsDiv.closest('.formset');
                if (!formsetDiv) return;

                const totalFormsInput = formsetDiv.querySelector(`input[name="${prefix}-TOTAL_FORMS"]`);
                if (totalFormsInput) {
                    totalFormsInput.value = parseInt(totalFormsInput.value) + 1;
                    console.log(`Incremented TOTAL_FORMS for ${prefix} to ${totalFormsInput.value}`);
                }
            });
        });
    </script>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"
      integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A=="
      crossorigin="anonymous" referrerpolicy="no-referrer"/>

    {% block head %}
        <title></title>
    {% endblock %}
</head>

<body>
    {% block body %}
    {% endblock %}
</body>